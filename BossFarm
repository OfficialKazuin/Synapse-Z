-- Locals

local LevelFarm = true
local Target = "Gigantomachia"
local Character = nil
local LocalPlayer = game:GetService("Players").LocalPlayer
local AntiAutoClick = LocalPlayer.PlayerGui.SaveGui.AntiAutoClick
local Button = ""

local function tween(part1, part2)
    local tw = game.TweenService:Create(part1, TweenInfo.new((part1.Position - part2.Position).Magnitude / 550), {CFrame = part2})
    tw:Play()
    tw.Completed:Wait()
end

local function NewTarget()
    if LevelFarm and Character == nil then
        for i,v in pairs(game:GetService("Workspace").NPCs:GetChildren()) do
            if string.find(v.Name, Target) then
                Character = v
            end
        end
    end
end

-- Checks

game.Players.ChildAdded:Connect(function(v)
    if v:IsInGroup(3755220) and v:GetRoleInGroup(3755220) ~= "Member"then
        LocalPlayer:Kick("")
    else
        -- we safe dawg 
    end
end)

if not LocalPlayer.Character:FindFirstChild("PVPOFF") then
    game.ReplicatedStorage.PVP:FireServer()
end

if AntiAutoClick.AntiAutoClickScript then
    AntiAutoClick.AntiAutoClickScript.Disabled = true
end

for i,v in pairs(AntiAutoClick.Colors:GetChildren()) do
    v.AnchorPoint = Vector2.new(0.5, 0.5)
end

if game.PlaceId == 14426865226 then
    
end

-- Autofarm

while task.wait() do
    for _, v in pairs(game:GetService("Players"):GetPlayers()) do
        if v ~= LocalPlayer then
            if v.Character and v:FindFirstChild("HumanoidRootPart") then
                local distance = (v.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
                if distance <= 5 then
                    LevelFarm = false
                    LocalPlayer.Character.HumanoidRootPart.Anchored = true
                else
                    LevelFarm = true
                end
            end
        end
        task.wait(1)
    end

    if LevelFarm and Character ~= nil and Character:FindFirstChild("Humanoid") and Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        if Character.Humanoid.Health ~= 0 then
            if LocalPlayer.Character:FindFirstChild("Pistol") then
                LocalPlayer.Character.HumanoidRootPart.Anchored = false

                workspace.CurrentCamera.CameraSubject = Character

                LocalPlayer.Character.Main.Swing:FireServer(Character.HumanoidRootPart.CFrame)

                if Character.Name == "Mirko" then
                    LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(Character.HumanoidRootPart.Position + Vector3.new(0, -300, 0), Character.HumanoidRootPart.Position)
                elseif Character.Name == "Gigantomachia" then
                    LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(Character.HumanoidRootPart.Position + Vector3.new(0, -275, 0), Character.HumanoidRootPart.Position)
                else
                    LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(Character.HumanoidRootPart.Position + Vector3.new(0, -200, 0), Character.HumanoidRootPart.Position)
                end
            else
                for i,v in pairs(LocalPlayer.PlayerGui.MainMenus.WeaponsMenu.ScrollingFrame:GetChildren()) do
                    if v.Name == "Pistol" then
                        game.ReplicatedStorage.WeaponShop.Equip:FireServer(v.Name)
                    end
                end
            end
        else
            LocalPlayer.Character.HumanoidRootPart.Anchored = true

            workspace.CurrentCamera.CameraSubject = LocalPlayer.Character

            Character = nil

            NewTarget()
        end
    else
        Character = nil

        NewTarget()
    end
    
    -- Bypasses the anti afk check

    if AntiAutoClick.Visible == true then
        if string.find(AntiAutoClick.TextFrame.ColorIndicator.Text, "Red") then
            Button = "R"
        elseif string.find(AntiAutoClick.TextFrame.ColorIndicator.Text, "Orange") then
            Button = "O"
        elseif string.find(AntiAutoClick.TextFrame.ColorIndicator.Text, "Yellow") then
            Button = "Y"
        elseif string.find(AntiAutoClick.TextFrame.ColorIndicator.Text, "Green") then
            Button = "G"
        elseif string.find(AntiAutoClick.TextFrame.ColorIndicator.Text, "Blue") then
            Button = "B"
        end

        wait()

        for i,v in pairs(AntiAutoClick.Colors:GetChildren()) do
            if string.find(Button.Text, Button) then
                v.Position = UDim2.new(0.5, 0, -2.25, 0)
            else
                v.Position = UDim2.new(0, 0, 0, 0)
            end
        end
    end
end
